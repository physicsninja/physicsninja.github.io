---
layout: pagewmath
subheadline: Theory
title:  "More General Spin-Torque Ferromagnetic Resonance (STFMR)"
teaser: "In which a more general framework for STFMR is presented."
breadcrumb: true
tags:
    - theory
categories:
    - science
image:
    thumb: STFMR/STFMRsim.jpg
    title: STFMR/STFMRsim.jpg
---

[Note: This page uses MathJax to render TeX equations]

# Introduction

In a previous [post][1], I derived the equations describing the motion of the magnetization of a thin film bilayer of a magnetic layer and a layer which generates a torque on the magnetic layer when an electrical current is passed through it. In that derivation, I made several assumptions about what determines the magnetization's equilibrium direction and about the nature of the torques generated by the non-magnetic layer. The assumptions regarding the torques were the most general for a magnetization which lies in the plane of the film: no matter what the origin of the torques, we may cast them as a part which points out-of-plane, $\tau_{OOP}$, and a part which points in-plane and perpendicular to the magnetization, $\tau_{IP}$. The assumptions made regarding the equilibrium direction of the magnetization were not the most general. 

This choice was deliberate, it allowed us to find an only-slightly-approximate closed-form solution to the motion of the magnetization. To be explicit (and for convenience), the assumptions that I am refering to are the forms for what I called the "equilibrium torques," $\tau_x$ and $\tau_z$:

$$
\overrightarrow{\tau}_z=-\gamma m_x B_{ext}\hat{z}
$$

$$
\overrightarrow{\tau}_x=\gamma m_z (B_{ext}+M_{eff})\hat{x}
$$

where $\gamma$ is the gyromagnetic ratio, $m_z$ is the projection of the normalized magnetization out-of-plane, $m_x$ is the projection of the magnetization in-plane, and $M_{eff}$ is the effective magnetization. 

These forms for the equilibrium torques generally describe the most common device used in ST-FMR. In particular, implicitly assumed in this formulation is negligible in-plane anistotropy and that the device is approximately an infinite sheet. Solving the Landau-Lifschift-Gilbert-Slonczewski (LLGS) equation with this explicit formulation for the equilibrium torques results in a form for the in-phase response of the in-plane magnetization, $m_x$, to in-plane and out-of-plane non-equilibrium (driving) torques of 

$$
\Re[m_x]=\frac{-(B_{ext}+M_{eff})\gamma\tau_{OOP}(\omega^2-\omega_0^2)+\omega^2\tau_{IP}\alpha\gamma(2B_{ext}+M_{eff})}{(\omega^2-\omega_0^2)^2+\omega^2\alpha^2\gamma^2(2B_{ext}+M_{eff})^2}
$$

where $\alpha$ is the phenomenological Gilbert damping parameter, $\omega$ is the frequency of the applied RF current, and $\omega_0$ is the Kittel resonance condition for an in-plane magnetized thin film.

The above result is useful but "phrased" somewhat incorrectly for experimental use. That is, as written, the above equation suggests we should sweep frequency ($\omega$) at a fixed field ($B_{ext}$). Why is that non-ideal? The ferromagnetic resonance condition for a magnet such as permalloy for modest external fields (0.1 T) is on the order of 10 GHz. At these frequencies, lumped element circuit analysis is no longer applicable because the electrical wavelengths are sufficienly short on the scale of the cabling. As a result, there can be substantial frequency depedence to the amount of power that reaches one's device, confounding the resulting measurement. In light of this, the more robust way to perform the experiment is then to apply a fixed RF current and sweep field. Of course, buried in the $\omega_0$ is a field dependence ($\omega_0^2\equiv\gamma\sqrt{B_{ext}(B_{ext}+M_{eff})}$. We could just make that implicit dependence explicit, but that makes the equation less concise and resulting paramater space for the fitting algorithm is vast and full of terrors. Furthermore, substituting in that definition of the resonance condition also shackles us to the Kittel dispersion relation. We might dare to desire a functional form that assumes as little of the dispersion relation as possible.

And dare we shall.


# The Most General ST-FMR

First, for convenience, let us restate the problem. We are looking for the equations of motion of the magnetization of a magnet in a system general described as a thin of magnetic material adjacent to a thin film of some material that is applying some kind of driving torque on the magnet's magnetization. We will do this by solving the LLGS equation:

$$\dot{\hat{m}}=\alpha \hat{m}\times\dot{\hat{m}}+\overrightarrow{\tau_{eq}}+\overrightarrow{\tau_{neq}}$$

Keeping with the coordinate choice laid out in the previous [post][1], I will define $\hat{z}$ as out of the plane of the film and $\hat{y}$ as parallel to the equilibrium magnetization direction. Given the magnitude of the driving torques (i.e. small), only minor excursions will made from this equilibrium direction so that we may write the unit moment $\hat{m}\equiv\overrightarrow{M}/M_{s}$ as $\hat{m}\approx(m_x,1,m_z)$, as before. In fact, everything about the set up will be exactly the same until we consider the equilibrium torques. In the previous post, I quipped that the equilibrium torques were what you would expect if you spent your days studying magnetism. While true, it was a cop out and obscured some of underlying physics. We can do better. 

## The Equilibrium Torques

Strictly, what I mean by equilibrium torques is $\gamma \hat{m}$ crossed with the effective field resulting from deviating from the equilibrium direction along an othorgonal direction. That is,

$$
\overrightarrow{\tau}_{eq}=-\left(\gamma\hat{m}\times-\frac{dF}{d\hat{m}}\right)
$$

where $\times$ is the  cross product, and $-\frac{dF}{d\hat{m}}$ is the negative derivative of the magnetic free energy (divided by $M_s$) with respect to the direction of the magnetization (which is to the say the effective field). So, what is the most general form of the free energy for the system we are examining? 

$$F(\overrightarrow{B})/M_s=\underbrace{-\hat{m}\cdot\overrightarrow{B}_{ext}}_{\text{dipole}} +\underbrace{\frac{1}{2} M_s \hat{m} \cdot \overrightarrow{N}_{demag}\cdot\hat{m}}_{\text{demagnetization}} +\underbrace{A(\hat{m})}_{\text{anisotropy}}$$

If $\frac{A(\hat{m})}{d\hat{m}}$ were zero then $\frac{dF}{d\hat{m}}$ would reduce to (remembering that in this case the magnetization and external field would be parallel) 

$$
\overrightarrow{\frac{dF}{d\hat{m}}}= \begin{pmatrix}0\\-B_{ext}\\m_z M_s\end{pmatrix}
$$

the resulting torques are then familiar (they're the ones that showed up in the previous post plus a $\hat{y}$ torque we neglected in the previous post as well):

$$
\overrightarrow{\tau}_{eq}= -\gamma\begin{pmatrix} m_y (-m_z M_s) -(m_z B_{ext})  \\- m_x (-m_z M_s)\\ m_x B_{ext}\end{pmatrix}
$$

Now, as in the previous post, our choice of coordinate basis means $m_y\approx1$ so we can ignore that factor in $\hat{x}$ component. Furthermore, the $\hat{y}$ equilibrium torque component has two factors of $m$ which are not $m_y$ so it will oscillate at twice the natural frequency. Since we will be looking at the magnetic response at the driving frequency, we do not care about this component so we will neglect it, as before.

This is great and all, but it is not actually the most general form of the equilibrium torques(!). In the case we just worked we explicitly neglected the piece the contains the possibility for arbitrary corrections, $A(\hat{m})$. We $could$ figure out what the most general forms of $A(\hat{m})$ are and generate explicit solutions, but that would be tedious and unenlightening with regards to our current goal (which will just be tedious). 

Let us instead say, "Well, we know how to figure it out if we are given an arbitrary $(\hat{m})$, so let's hide that fact in a succinct piece of notation so that we can understand the effects of these equilibrium torques on the equations of motion." To do that, we note that in these units the dimension of $\tau$ is just frequency so we'll write

$$
\overrightarrow{\tau}_{eq}= \begin{pmatrix} m_z\omega_2 \\0\\-m_x\omega_1\end{pmatrix}
$$

with $\omega_1\equiv \gamma B_{ext}$ and $\omega_2\equiv \gamma (B_{ext}+M_s)$. 

## The Damping Term $\alpha \hat{m}\times\dot{\hat{m}}$

In the previous post I glossed over how I arrived at the final result from the damping term. Because I want this post to be as explicit as possible, the explicit derivation is as follows.

$$
\alpha \hat{m}\times\dot{\hat{m}} = \alpha\begin{pmatrix} m_y\dot{m}_z-m_z\dot{m}_y\\ m_z\dot{m}_x-m_x\dot{m}_z\\ m_x\dot{m}_y-m_y\dot{m}_x\end{pmatrix}
$$

Using $m_y\approx1$ and $\dot{m}_y\approx0$:

$$
\approx \alpha \begin{pmatrix} \dot{m}_z\\ m_z\dot{m}_x-m_x\dot{m}_z\\ -\dot{m}_x\end{pmatrix}
$$

We will also neglect the $\hat{y}$ for the same reason as above.

## The non-equilibrium torques
As is the theme of this post, we do not care about the explicit form for these torques in trying to solve the LLGS equation. If you need to actually plug in realistic numbers you can find the explicit forms in the previous post. All we need to note for our purposes is that the most general form for the torques is one that acts out of the plane of the thin film we are considering, $\tau_{OOP}\hat{z}$, and one that acts in plane but perpendicular to the magnetization direction, $\tau_{IP} \hat{x}$. Thus

$$
\overrightarrow{\tau}_{neq} = \begin{pmatrix} \tau_{IP}\\ 0 \\ \tau_{OOP} \end{pmatrix}
$$

## Solving the LLGS equation

Now that all explicit pieces are out of the way we are ready to solve the LLGS equation. Unlike last time this will be notationally cleaner and potentially illuminated, so I offer that it might be useful to follow along.

Restating the problem, we are looking for solutions of:

$$\dot{\hat{m}}=\alpha \hat{m}\times\dot{\hat{m}}+\overrightarrow{\tau_{eq}}+\overrightarrow{\tau_{neq}}$$

Putting everything in:

$$
\begin{pmatrix} \dot{m}_x \\ 0 \\ \dot{m}_z \end{pmatrix} = \begin{pmatrix} \alpha \dot{m}_z -m_z\omega_2 + \tau_{IP} \\ 0 \\ -\alpha \dot{m}_x +m_x\omega_1 + \tau_{OOP} \end{pmatrix}
$$

Already this looks much cleaner than before. Each piece that affects the motion of the magnetization has its own symbol, abstractifying the specifics and (I think) providing an easier route to intuition. 

### Forming the Ansatz

We need to pick one of $m_x$ or $m_z$ to solve for. Because the piece we care about for electrical detection in a "standard" STFMR experiment is $m_x$, I will solve for that here. We can of course get $m_z$ by plugging $m_x$ into $\dot{m}_x$. There is a problem, however: those pesky time derivatives. Since we have a notion of what the magnetization is going to do (precess), lets take a guess that the solutions are some static amplitude times $e^{-i\omega t}$ where the unadorned $\omega$ is the frequency of the driving torques. This makes the time derivatives trivial, just pulling down $-i\omega$. The remaining factors of $e^{-i\omega t}$ cancel. This leaves

$$
\begin{pmatrix} -i\omega m_x \\ 0 \\ -i\omega m_z \end{pmatrix} = \begin{pmatrix} -i\omega\alpha m_z -m_z\omega_2 + \tau_{IP} \\ 0 \\ i\omega\alpha m_x +m_x\omega_1 + \tau_{OOP} \end{pmatrix}
$$

Rearranging,

$$
\begin{pmatrix} -i\omega m_x \\ 0 \\ -i\omega m_z \end{pmatrix} = \begin{pmatrix} -m_z(i\omega\alpha +\omega_2) + \tau_{IP} \\ 0 \\ m_x(i\omega\alpha +\omega_1) + \tau_{OOP} \end{pmatrix}
$$

Now we focus on just $m_x$ and plug our equation for $m_z$ into $m_x$

$$
-i\omega m_x = \frac{1}{i\omega}(i\omega\alpha +\omega_2)(m_x(i\omega\alpha+\omega_1)+\tau_{OOP})+\tau_{IP}
$$

Distributing the $(i\omega\alpha +\omega_2)$

$$
-i\omega m_x = \frac{1}{i\omega}m_x(i\omega\alpha+\omega_1)(i\omega\alpha +\omega_2)+\frac{1}{i\omega}\tau_{OOP}(i\omega\alpha +\omega_2)+\tau_{IP}
$$

Collecting all of the $m_x$ terms

$$
-m_x(i\omega +\frac{1}{i\omega}(i\omega\alpha+\omega_1)(i\omega\alpha +\omega_2)) = \frac{1}{i\omega}\tau_{OOP}(i\omega\alpha +\omega_2)+\tau_{IP}
$$

Multiplying through by $i\omega$

$$
-m_x(-\omega^2 +(i\omega\alpha+\omega_1)(i\omega\alpha +\omega_2)) = \tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP}
$$

Further expanding

$$
-m_x(-\omega^2 -\omega^2\alpha^2+i\omega\alpha(\omega_1+\omega_2) + \omega_1\omega_2) = \tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP}
$$

Isolating $m_x$

$$
m_x = \frac{\tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP}}{\omega^2(1+\alpha^2)-i\omega\alpha(\omega_1+\omega_2) - \omega_1\omega_2}
$$

Now, here we are going to make an approximation (alas). The gilbert damping parameter, $\alpha$, is typically around $10^{-2}$ or less in commonly used thin film magnet choices. Thus $\alpha^2$ is going to be $\approx 10^{-4}$ or less which is very small compared to 1 so $(1+\alpha^2)\approx 1$. Rearranging after that:

$$
m_x = \frac{\tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP}}{(\omega^2-\omega_1\omega_2) -i\omega\alpha(\omega_1+\omega_2) }
$$

Now let's make the denominator purely real by multiplying both numerator and denominator by the complex conjugate of the denominator

$$
m_x = \frac{((\omega^2-\omega_1\omega_2) +i\omega\alpha(\omega_1+\omega_2))(\tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP})}{(\omega^2-\omega_1\omega_2)^2 +\omega^2\alpha^2(\omega_1+\omega_2)^2 }
$$

### Prescient Definitions

Let us pause a moment and consider what we have. The denominator has the form of a lorentzian denominator so let's make that explicit. We will define $\omega_0^2\equiv\omega_1\omega_2$ and $\omega^+\equiv\omega_1+\omega_2$. This gives:

$$
m_x = \frac{((\omega^2-\omega_0^2) +i\omega\alpha\omega^+)(\tau_{OOP}(i\omega\alpha +\omega_2)+i\omega\tau_{IP})}{(\omega^2-\omega_0^2)^2 +\omega^2\alpha^2(\omega^+)^2 }
$$

Clearly, $\omega_0$ is the resonant frequency of the system. It is also the geometric mean of $\omega_1$ and $\omega_2$. This makes sense, these are the two characteristic frequencies of this system. This is also why I stated early that it would be instructive to do the derivation this way, this result falls out manifestly. That is not to say that the same thing didn't happen in the previous derivation, but it was not quite clear that the components of the resonant frequency were somewhat deep statements about the system. 

### The in-phase component
Before we get to the agressively tedious part, we should extract the part that we can actually detect. As a reminder, the way we detect this signal, is by the oscillation of the m_x causing a change in resistance. That mixes with the driving current to give a DC voltage and a voltage at twice the frequency. Thus we need the part of $m_x$ that is in-phase with the driving current, the real part. Let's get that piece now:

$$
\Re[m_x] = \frac{((\omega^2-\omega_0^2)\omega_2-\alpha^2\omega^2\omega^+)\tau_{OOP} -\alpha\omega^2\omega^+\tau_{IP}}{(\omega^2-\omega_0^2)^2 +\omega^2\alpha^2(\omega^+)^2 }
$$

You may have noticed it earlier and it is perhaps glaringly obvious at this point, but I have not made an assumption normally done at this stage or earlier in other derivations: that $i\omega\alpha \ll \omega_2$ in the part multiplying $\tau_{OOP}$ in the numerator. I did the same thing in my previous post , but I dismissed it without this lengthy exposition. It is pretty typically a good assumption, especially in the simple case, and the modifications to the linewidth are small. I leave it in at this stage in and comment on it in case a system with crazy anistropies changes the validity of the inequality just mentioned. To really get a really good handle on things lets rewrite:

$$
\Re[m_x] = \underbrace{\frac{(\omega^2-\omega_0^2)\omega_2\tau_{OOP}}{(\omega^2-\omega_0^2)^2 +\omega^2\alpha^2(\omega^+)^2 }}_{\text{Antisymmetric Lorentzian}} -\underbrace{\frac{\alpha\omega^2\omega^+(\alpha\tau_{OOP} +\tau_{IP})}{(\omega^2-\omega_0^2)^2 +\omega^2\alpha^2(\omega^+)^2 }}_{\text{Symmetric Lorentzian}}
$$

Now we see that the resulting signal should be the sum of a symmetric and antisymmetric Lorentzian, and that if the stars align (figuratively) then the out of plane torque could lead to a symmetric component (literally).

### Half the Battle

So we made it, but did we really? The above equation is still "phrased" wrong, everything is in terms of frequencies. We want something in terms of $B_{ext}$ because that is going to be the parameter most sensible to sweep in our experiments. We still don't want to assume anything about the $B$-dependence of $\omega_1$ or $\omega_2$, though. So, we taylor expand about the resonant field. That's where our signal will peak and because the linewidth should be pretty sharp, we can get away with linear order terms only to excellent approximation.

$$
\omega_0^2\approx \left.\omega_0^2\right|_{B=B_0}+(B-B_0)\left.\frac{d (\omega_0^2)}{dB}\right|_{B=B_0}
$$ 

$$
\left.\frac{d (\omega_0^2)}{dB}\right|_{B=B_0}= \omega_1\left.\frac{d (\omega_2)}{dB}\right|_{B=B_0}+\omega_2\left.\frac{d (\omega_1)}{dB}\right|_{B=B_0}
$$

Now we are at somewhat of an impass. We need to know what the derivatives of the natural frequencies are. We could keep them entirely general, but for the purposes of brevity here, I will not. Looking back to the derivation of the equilibrium torques in the case of no anisotropy, note that the field dependence only enters the equilibrium torques as a $\gamma B_{ext}$ term. If there were anistropy terms with field dependence, that field depedence would likely come in as a reorientation of the magnetization with field, meaning that it would be supressed by a factor of the magnetization or so. Thus, to a pretty general approximation, we get

$$
\left.\frac{d (\omega_0^2)}{dB}\right|_{B=B_0}= \gamma\left.\omega_1\right|_{B=B_0}+\gamma\left.\omega_2\right|_{B=B_0}
$$

$$
\left.\frac{d (\omega_0^2)}{dB}\right|_{B=B_0}= \gamma\omega_{B0}^+
$$

with

$$
\omega_{B0}^+\equiv\left.\omega^+\right|_{B=B_0}
$$

To be more accurate, we would then to do the same taylor expansion for the remaining "bare" $\omega^+$ terms in $\Re[m_x]$ as well as the $\omega_2$ next to the $\tau_{OOP}$. However, given the fact that $\alpha$ is typically small (we predicated several previous assumptions on that basis already), the Lorentzian line shape is pretty sharply peaked. In that regard, we can to a reasonable approximation treat it as a delta function about resonant field, $B_0$. Thus the "bare" $\omega^+$'s become $\omega_{B0}^+$'s and the $\omega_2$ becomes $\omega_{2,B0}$.

## Victory

We did it. Putting everything together, we get

$$
\Re[m_x] = \underbrace{\frac{(B-B_0)\gamma\omega_{B0}^+\omega_{2,B0}\tau_{OOP}}{\gamma^2(\omega_{B0}^+)^2(B-B_0)^2 +\omega^2\alpha^2(\omega_{B0}^+)^2 }}_{\text{Antisymmetric Lorentzian}} -\underbrace{\frac{\alpha\omega^2\omega_{B0}^+(\alpha\tau_{OOP} +\tau_{IP})}{\gamma^2(\omega_{B0}^+)^2(B-B_0)^2 +\omega^2\alpha^2(\omega_{B0}^+)^2 }}_{\text{Symmetric Lorentzian}}
$$

Lets make one more definition and rearrange slightly

$$
\Delta\equiv\frac{\alpha\omega}{\gamma}
$$

So

$$
\Re[m_x] = \frac{\omega}{\gamma\Delta\omega_{B0}^+}\frac{(B-B_0)\frac{\omega_{2,B0}}{\omega}\Delta\tau_{OOP}+\Delta^2(\alpha\tau_{OOP} +\tau_{IP})}{(B-B_0)^2 +\Delta^2 }
$$

Now, I condensed a lot of steps of cancelling and substituting in writing the above. If you substitute everything back in you'll find that this form agrees with our earlier result. Why did we put it in this form? Two reasons: 1) It is what is used in [this paper][2] (minus the extra $\alpha\tau_{OOP}$ we carried with us); and 2) it puts the denominator entirely in terms of fields, $Delta$ is the so-called linewidth. To fully reproduced the form in [that paper][2], note that 

$$
\omega=\left.\omega_0\right|_{B=B0}=\sqrt{\omega_{1,B0},\omega_{2,B0}}
$$

## Closing thoughts

I hope that if you have stuck it out until this point you have found it illuminating. To recap, our goal was to derive the equation of motion for the component of the in-plane component of the magnetization perpendicular to the equilibrium direction of the magnetiziation for a thin film magnetic layer being driven by external torques. We wanted this because this component leads to the production of a DC voltage signal in a real experiment as described more fully at the end of the previous post. Our goal was to do this in a way that made almost no assumptions about what anisotropies could be present in the ferromagnetic layer and to recast the equations in a more experimentally relevant way (sweeping field not frequency). 

While I hope the prescription for solving things that I have laid out is enough to generalize to a complicated anisotropy system, I realize it may not be. This discussion will the topic of a future post: the effect of arbitrary anisotropy on an in-plane magnetic thin film sample. If you have questions or spot mistakes, please don't hesistate to contact me by clicking on the contact link at the bottom of the page.

## Related projects
{: .t60 }
{% include list-posts tag='theory' %}

[1]: {{ site.baseurl }}/science/Simple-STFMR
[2]: https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.106.036601

